{% extends 'base.html' %}
{% block content %}
    
    <h1>{{ trip.trip_name }}: All the infos!</h1>

    <br>

    <h3>All the peoples
        <ul>
            {% for usertrip in trip.usertrips%}
            <li>
                {{ usertrip.user.user_name }}
            </li>
            {% endfor %}
        </ul>
    </h3>

    <a href="/trip/{{ trip.trip_id }}/search">Searches the stuffs</a>

    <br>

    <a href="/trip/{{ trip.trip_id }}/share">Sharing all the trips!</a>

    <p>All stuffs in here based on search results and whatnots</p>

    {% for option in options %}
    <h3>Option: {{ option.option_id }}: Traveling to {{ option.destination_airport.airport_city }} from {{ option.depart_date }} to {{ option.return_date }}</h3>
        {% for flight in option.flights %}
        <h4>Flight: {{ flight.flight_id }} Price: {{ flight.flight_price }}</h4>
        <table>
            <thead>
                <th>
                    <td>Origin Airport</td>
                    <td>Departure Datetime</td>
                    <td>Destination Airport</td>
                    <td>Arrival Time</td>
                    <td>Flight ID</td>
                    <td>Flight Duration</td>
                </th>
            </thead>
            {% for leg in flight.legs %}
            <tbody>
                <tr>
                    <td>{{ leg.origin_airport_code }}</td>
                    <td>{{ leg.departure_datetime }}</td>
                    <td>{{ leg.destination_airport_code }}</td>
                    <td>{{ leg.arrival_datetime }}</td>
                    <td>{{ leg.leg_airline }} {{ leg.leg_flight_code }}</td>
                    <td>{{ leg.leg_duration }}</td>
                </tr>
            </tbody>
            {% endfor %}
        </table>
        {% endfor %}
    {% endfor %}

{% endblock %}